{% extends 'base.html.twig' %}

{% block body %}
    <div class="container">
        {{ form_start(form) }}
        <div class="card w-75 mx-auto my-2">
            <div class="px-3 d-flex flex-row align-items-center justify-content-between">
                <div class="alert alert-dark my-auto">
                    <h2>{{ trip.route }}</h2>
                </div>

                <div class="alert my-auto">
                    <h5>Время отправления: <span class="lead"><span
                                    class="badge badge-info"> {{ trip.departureTime|date('H:i') }}</span></span></h5>
                    <h5>Время прибытия: <span class="lead"><span
                                    class="badge badge-info"> {{ trip.arrivalTime|date('H:i') }}</span></span></h5>
                </div>

                <div>
                    <span class="lead"><span
                                class="badge badge-primary">Цена: {{ trip.price/100|number_format }} руб. </span></span>
                </div>
            </div>
            <div class="card-footer">

                <div class="d-flex flex-row justify-content-between align-items-center">
                    {{ form_row(form.tripDate) }}
                </div>

                {% if error %}
                    <div class="alert alert-danger">{{ error }}</div>
                {% endif %}
            </div>
        </div>
        <div class="row align-items-center h-100 my-5">
            <div class="col-10 mx-auto">
                <div class="card">
                    <article class="card-body">
                        <h1>Данные пассажира</h1>


                        <div class="row">
                            <div class="col-4">
                                {{ form_row(form.passenger.email) }}
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-4">
                                {{ form_row(form.passenger.lastName) }}
                            </div>
                            <div class="col-4">
                                {{ form_row(form.passenger.firstName) }}
                            </div>
                            <div class="col-4">
                                {{ form_row(form.passenger.patronymic) }}
                            </div>
                        </div>

                        {{ form_row(form.passenger.passportNumber) }}
                        {{ form_row(form.passenger.phone) }}

                        <button type="submit" class="btn btn-success btn-block">Продать билет</button>


                        {% for flashError in app.flashes('verify_email_error') %}
                            <div class="alert alert-danger" role="alert">{{ flashError }}</div>
                        {% endfor %}
                    </article>
                </div> <!-- card.// -->
            </div>
        </div>
    </div>
    {{ form_end(form) }}
{% endblock %}

    {% block title %}
        3wer
    {% endblock %}
    {% block stylesheets %}
        {{ parent() }}
        <link rel="stylesheet"
              href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/css/bootstrap-datepicker.min.css">
    {% endblock %}
    {% block javascripts %}
        {{ parent() }}
        <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/js/bootstrap-datepicker.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/locales/bootstrap-datepicker.ru.min.js"
                integrity="sha512-tPXUMumrKam4J6sFLWF/06wvl+Qyn27gMfmynldU730ZwqYkhT2dFUmttn2PuVoVRgzvzDicZ/KgOhWD+KAYQQ=="
                crossorigin="anonymous" referrerpolicy="no-referrer"></script>

        <script>
            var today = new Date();
            var lastDate = new Date(today.getFullYear(), today.getMonth(), 31);
            jQuery(document).ready(function () {
                $('.js-datepicker').datepicker({
                    format: 'yyyy-mm-dd',
                    language: 'ru',
                    startDate: today,
                    endDate: lastDate,
                    daysOfWeekDisabled: {{ disabledWeekdays }},
                    daysOfWeekHighlighted: {{ daysOfWeekHighlighted }},
                    todayHighlight: true,
                });
            });
        </script>
    {% endblock %}

